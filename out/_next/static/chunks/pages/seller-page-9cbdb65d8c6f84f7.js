(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[503],{1210:function(e,t,l){(window.__NEXT_P=window.__NEXT_P||[]).push(["/seller-page",function(){return l(4285)}])},4285:function(e,t,l){"use strict";l.r(t),l.d(t,{default:function(){return d}});var i=l(5893),a=l(7294);l(8828);let s=l(7066).Z.create({baseURL:"https://0sy7wxlvx0.execute-api.us-east-2.amazonaws.com/AuctionHouse"});function d(){let[e,t]=(0,a.useState)(""),[l,d]=(0,a.useState)([]),[r,n]=(0,a.useState)(""),[c,u]=(0,a.useState)(""),o=e=>"true"===e.isPublished&&"false"===e.isActive&&null!==e.bids&&"false"===e.isArchived?"completed, awaiting fulfillment":"true"===e.isArchived?"archived":"true"===e.isPublished&&"false"===e.isActive&&null===e.bids?"failed":" ";(0,a.useEffect)(()=>{let e=new URLSearchParams(window.location.search).get("username");e&&n(e)},[]);let m=e=>{let l={username:document.getElementById("sellerUsername").innerText};console.log("Sending data:",l),s.post("/getBalance",l).then(function(e){400===e.data.statusCode?alert(e.data.error):200===e.data.statusCode&&(console.log(e.data.balance),t(e.data.value))}).catch(function(e){alert("Failed")})};(0,a.useEffect)(()=>{r&&m(r)},[r]);let h=(e,t)=>{var l;let i=null===(l=e.target.files)||void 0===l?void 0:l[0];if(i){let e=new FileReader;e.onload=()=>{e.result&&t(e.result.toString())},e.readAsDataURL(i)}},I=e=>{s.post("/removeInactiveItemSeller",{itemId:e}).then(e=>{200===e.data.statusCode?(alert("Inactive item successfully removed"),v("")):alert(e.data.error)}).catch(()=>alert("Failed to remove inactive item."))},x=e=>{s.post("/publishItemSeller",{itemID:e}).then(e=>{200===e.data.statusCode?(alert("Item successfully published"),v("")):alert(e.data.error)}).catch(()=>alert("Failed to publish item."))},p=e=>{s.post("/unpublishItemSeller",{itemID:e}).then(e=>{200===e.data.statusCode?(alert("Item successfully unpublished"),v("")):alert(e.data.error)}).catch(()=>alert("Failed to unpublish item."))},j=e=>{s.post("/requestUnfreezeItemSeller",{itemID:e}).then(e=>{200===e.data.statusCode?(alert("Successfully requested to unfreeze item"),v("")):alert(e.data.error)}).catch(()=>alert("Failed to request to unfreeze item."))},v=e=>{let t=document.getElementById("sellerUsername").innerText;s.post("/reviewItems",{sellerUsername:t}).then(function(e){console.log(e),400===e.data.statusCode?alert(e.data.error):200===e.data.statusCode&&d(e.data.data)}).catch(function(e){alert("Failed")})},b=e=>{s.post("/fulfillItem",{itemID:e}).then(function(e){400===e.data.statusCode?(alert(e.data.error),v(""),m(r)):200===e.data.statusCode?(alert("Item Fulfilled"),v(""),m(r)):409===e.data.statusCode&&(alert("Could Not Fulfill Item"),v(""),m(r))}).catch(function(e){alert("Failed")})},f=e=>{s.post("/archive",{itemID:e}).then(function(e){400===e.data.statusCode?alert(e.data.error):200===e.data.statusCode?(alert("Item Archived"),v("")):409===e.data.statusCode&&alert("Could Not Archive Item")}).catch(function(e){alert("Failed")})};return(0,i.jsxs)("main",{className:"sellerMain",children:[(0,i.jsx)("div",{className:"sellerUsername",id:"sellerUsername",children:r}),(0,i.jsxs)("div",{className:"addItemForm",children:[(0,i.jsx)("label",{children:"Upload Image (required):"}),(0,i.jsx)("input",{className:"addItem-uploadImageInput",type:"file",accept:"image/*",onChange:e=>h(e,u),required:!0}),(0,i.jsx)("label",{children:"Item Name (required):"}),(0,i.jsx)("input",{className:"addItem-itemNameInput",type:"text",placeholder:"Item Name",required:!0}),(0,i.jsx)("label",{children:"Description (required):"}),(0,i.jsx)("input",{className:"addItem-descriptionInput",type:"text",placeholder:"Description",required:!0}),(0,i.jsx)("label",{children:"Initial Price (required):"}),(0,i.jsx)("input",{className:"addItem-initialPriceInput",type:"text",placeholder:"Initial Price",required:!0}),(0,i.jsx)("label",{children:"End Date (required):"}),(0,i.jsx)("input",{className:"addItem-endDateInput",type:"datetime-local",required:!0}),(0,i.jsxs)("label",{children:["Buy now? (optional) ",(0,i.jsx)("input",{type:"checkbox",className:"addItem-buyNow",id:"addItem-buyNow"})]}),(0,i.jsx)("button",{className:"addItemButton",onClick:()=>{var e;let t;let l=document.querySelector(".addItem-itemNameInput").value,i=document.querySelector(".addItem-descriptionInput").value,a=document.querySelector(".addItem-initialPriceInput").value,d=document.querySelector(".addItem-endDateInput").value,r=document.querySelector(".addItem-buyNow").checked?"true":"false";if(!l||!c||!i||!a||!d){alert("Please fill in all required fields (Image, Item Name, Description, Initial Price, End Date).");return}let n=null===(e=document.getElementById("sellerUsername"))||void 0===e?void 0:e.innerText;s.post("/addItemSeller",{itemName:l,imageUrl:c,description:i,price:a,startDate:t,endDate:d,sellerUsername:n,buyNow:r}).then(e=>{200===e.data.statusCode?(alert("Item successfully added"),v("")):alert(e.data.error)}).catch(()=>alert("Failed to add item."))},children:"Add Item"})]}),(0,i.jsxs)("div",{className:"editItemForm",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{children:"Item ID (required):"}),(0,i.jsx)("input",{className:"editItem-itemID",type:"text",placeholder:"item id",required:!0})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{children:"Upload image (required):"}),(0,i.jsx)("input",{className:"editItem-uploadImageInput",type:"file",accept:"image/*",onChange:e=>h(e,u),required:!0})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{children:"Item Name (required):"}),(0,i.jsx)("input",{className:"editItem-itemNameInput",type:"text",placeholder:"item name",required:!0})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{children:"Description (required):"}),(0,i.jsx)("input",{className:"editItem-descriptionInput",type:"text",placeholder:"description",required:!0})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{children:"Initial Price (required):"}),(0,i.jsx)("input",{className:"editItem-initialPriceInput",type:"text",placeholder:"initial price",required:!0})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{children:"End Date (required): "}),(0,i.jsx)("input",{className:"editItem-endDateInput",type:"datetime-local",placeholder:"end date",required:!0})]}),(0,i.jsx)("div",{className:"buyNowItemDiv",children:(0,i.jsxs)("label",{children:["Buy now? (optional) ",(0,i.jsx)("input",{type:"checkbox",className:"editItem-buyNow",id:"editItem-buyNow"})]})}),(0,i.jsx)("div",{className:"editItemButtonDiv",children:(0,i.jsx)("button",{className:"editItemButton",onClick:()=>{var e;let t;let l=document.querySelector(".editItem-itemID").value,i=document.querySelector(".editItem-itemNameInput").value,a=document.querySelector(".editItem-descriptionInput").value,d=document.querySelector(".editItem-initialPriceInput").value,r=document.querySelector(".editItem-endDateInput").value,n=document.querySelector(".editItem-buyNow").checked?"true":"false";if(!i||!c||!a||!d||!r){alert("Please fill in all required fields (Image, Item Name, Description, Initial Price, End Date).");return}let u=null===(e=document.getElementById("sellerUsername"))||void 0===e?void 0:e.innerText;s.post("/editItemSeller",{itemID:l,imageUrl:c,itemName:i,description:a,price:d,startDate:t,endDate:r,sellerUsername:u,buyNow:n}).then(e=>{200===e.data.statusCode?(alert("Item successfully edited"),v("")):alert(e.data.error)}).catch(()=>alert("Failed to edit item."))},children:"Edit item"})})]}),(0,i.jsxs)("div",{id:"sellerBalance",className:"sellerBalance",children:[null!==e?"$".concat(e):"Loading balance...",(0,i.jsx)("button",{className:"closeAccountButton",onClick:e=>{let t={sellerUsername:document.getElementById("sellerUsername").innerText};console.log("Sending data:",t),s.post("/closeAccountSeller",t).then(function(e){400===e.data.statusCode?alert(e.data.error):200===e.data.statusCode&&(alert("Account successfully closed"),window.location.href="https://auctionhouse24.s3.us-east-2.amazonaws.com/login-page.html")}).catch(function(e){alert("Failed")})},children:"Close Account"})]}),(0,i.jsxs)("div",{className:"sellerItems",children:[(0,i.jsx)("button",{className:"reviewItems",onClick:e=>v(e),children:"Review Items"}),(0,i.jsx)("label",{children:"Items: "})]}),(0,i.jsx)("div",{className:"itemTable",children:l&&l.length>0?(0,i.jsxs)("table",{className:"items",children:[(0,i.jsx)("thead",{children:(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{children:"Item Name"}),(0,i.jsx)("th",{children:"Item Price"}),(0,i.jsx)("th",{children:"Item Image"}),(0,i.jsx)("th",{children:"Item Status"}),(0,i.jsx)("th",{children:"Item ID"}),(0,i.jsx)("th",{children:"Item Description"}),(0,i.jsx)("th",{children:"Buy Now"}),(0,i.jsx)("th",{children:"Fulfill Item"}),(0,i.jsx)("th",{children:"Remove Item"}),(0,i.jsx)("th",{children:"Archive Item"}),(0,i.jsx)("th",{children:"Publish Item"}),(0,i.jsx)("th",{children:"Unpublish Item"}),(0,i.jsx)("th",{children:"Request Unfreeze"}),(0,i.jsx)("th",{children:"Start Date"}),(0,i.jsx)("th",{children:"End Date"}),(0,i.jsx)("th",{children:"Overall Status"})]})}),(0,i.jsx)("tbody",{children:l.map((e,t)=>(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:e.itemName}),(0,i.jsx)("td",{children:e.price}),(0,i.jsx)("td",{children:(0,i.jsx)("img",{className:"itemImage",src:e.imageUrl})}),(0,i.jsxs)("td",{children:[" ","true"===e.isFrozen?"FROZEN":"true"===e.isActive?"Active":"Inactive"," "]}),(0,i.jsx)("td",{children:e.id}),(0,i.jsx)("td",{children:e.description}),(0,i.jsx)("td",{children:e.buyNow}),(0,i.jsx)("td",{children:(0,i.jsx)("button",{onClick:()=>b(e.id),disabled:"true"===e.isArchived||"true"===e.isFrozen||"true"===e.isArchived||"false"===e.isPublished&&"false"===e.isActive||"true"===e.isPublished&&"true"===e.isActive||"true"===e.isPublished&&"false"===e.isActive&&null===e.bids||"true"===e.isFulfilled,children:"Fulfill Item"})}),(0,i.jsx)("td",{children:(0,i.jsx)("button",{onClick:()=>I(e.id),disabled:"true"===e.isActive||"true"===e.isPublished,children:"Remove Item"})}),(0,i.jsx)("td",{children:(0,i.jsx)("button",{onClick:()=>f(e.id),disabled:"true"===e.isFulfilled||"true"===e.isPublished||"true"===e.isActive||"true"===e.isArchived,children:"Archive Item"})}),(0,i.jsx)("td",{children:(0,i.jsx)("button",{onClick:()=>x(e.id),disabled:"true"===e.isArchived||"true"===e.isPublished||"true"===e.isActive,children:"Publish Item"})}),(0,i.jsx)("td",{children:(0,i.jsx)("button",{onClick:()=>p(e.id),disabled:"false"===e.isPublished||"true"===e.isFrozen||"true"===e.isArchived||"true"===e.isPublished&&"false"===e.isActive&&null===e.bids,children:"Unpublish Item"})}),(0,i.jsx)("td",{children:(0,i.jsx)("button",{onClick:()=>j(e.id),disabled:"false"===e.isFrozen,children:"Request Unfreeze"})}),(0,i.jsx)("td",{children:e.startDate}),(0,i.jsx)("td",{children:e.endDate}),(0,i.jsx)("td",{children:o(e)})]},t))})]}):(0,i.jsx)("p",{children:"No items to display"})})]})}},8828:function(){}},function(e){e.O(0,[66,888,774,179],function(){return e(e.s=1210)}),_N_E=e.O()}]);